- name: Copy docker compose to target server
  copy:
    src: "../roles/docker-compose/release/{{ arch }}/{{ version }}/docker-compose-linux-{{ pkg_map[arch] }}"
    dest: "/tmp/docker-compose-linux-{{ pkg_map[arch] }}"

- name: Set execute permission for docker-compose
  file:
    path: "/tmp/docker-compose-linux-{{ pkg_map[arch] }}"
    mode: "0755"

- name: Rename and move docker-compose to /usr/local/bin
  command: mv /tmp/docker-compose-linux-{{ pkg_map[arch] }} /usr/local/bin/docker-compose

- name: Clean up temporary file
  file:
    path: "/tmp/docker-compose-linux-{{ pkg_map[arch] }}"
    state: absent
